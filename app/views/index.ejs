<!DOCTYPE html>
<html ng-app="ToDo">
<head>
  <% include ../views/partials/head %>
</head>

<body ng-controller="ToDoController as ctrl">

<button class="new-btn" ng-click="ctrl.new()">New</button>

<ul id="todo-list" ng-repeat="toDo in ctrl.filteredToDos">
  <li>
    <input class="checkbox" type="checkbox" ng-model="ctrl.selection[toDo._id]">
    <span class="task" ng-style="{ 'text-decoration': toDo.complete === true ? 'line-through' : 'none' }">{{toDo.task}}</span>
    <span class="category">{{toDo.category}}</span>
    <button class="edit-btn" ng-click="ctrl.edit(toDo)">Edit</button>
  </li>
</ul>

<button class="delete-btn" ng-click="ctrl.delete()">Delete</button>

<button class="completed-btn" ng-click="ctrl.markComplete()">Mark complete</button>

<select id="category-dropdown" ng-model="ctrl.selectedCategory" ng-change="ctrl.filterToDos()">
  <option>All</option>
  <option ng-repeat="category in ctrl.categories">{{category}}</option>
</select>

<div id="edit-dialogue" ng-show="ctrl.editing">
  <form>
    <input ng-model="ctrl.editedTask"></input>
    <input ng-model="ctrl.editedCategory"></input>
    <button class="save-btn" ng-click="ctrl.save()">Save</button>
  </form>
</div>

<div id="new-dialogue" ng-show="ctrl.creating">
  <form>
    <input ng-model="ctrl.task"></input>
    <input ng-model="ctrl.category"></input>
    <button class="add-btn" ng-click="ctrl.add()">Add</button>
  </form>
</div>

</body>
